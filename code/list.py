import os
from PIL import Image

allFileList = os.listdir("C://Users/User/OneDrive - 國立中正大學/醫學影像專題/專題三/ADC_PNG_val_bias")
pngimage_dir = "C://Users/User/OneDrive - 國立中正大學/醫學影像專題/專題三/val/ADC/0"

target = [
58968677, 58999510, 59029773, 59119511, 59169783, 59249140, 59268288, 59369404, 59388832, 59479264, 59539029, 59549349, 59549653, 59569415, 59579810, 59668538, 59859530, 59868310, 59939553, 59979399, 60089230, 60149040, 60159506, 60208631, 60208853, 60219583, 60329848, 60338741, 60378693, 60528722, 60539834, 60549369, 60588627, 60618850, 60629832, 60639657, 60668282, 60719397, 60769385, 61008414, 61029129, 61029679, 61118908, 61188499, 61229321, 61238484, 61239153, 61258826, 61359448, 61438914, 61539369, 61548309, 61549658, 61568451, 61589111, 61589746, 61658930, 61668847, 61798872, 61829170, 62139414, 62149178, 62208295, 62239114, 62279172, 62398286, 62479060, 62549169, 62599669, 62649081, 62688615, 62709488, 62759094, 62809621, 62818500, 63039225, 63068676, 63069123, 63089251, 63258756, 63389498, 63438714, 63469473, 63589409, 63589584, 63659515, 63729560, 63759468, 63799464, 63879364, 63888977, 63909603, 64009753, 64068972, 64078865, 64189783, 64208729, 64228529, 64288608, 64458773, 64668936, 64858283, 64988423, 65048324, 65068599, 65108615, 65118676, 65229471, 65288690, 65298262, 65409699, 65489295, 65529557, 65618589, 65769557, 65879027, 65889866, 65928718, 65958388, 65979420, 66029605, 66049252, 66069410, 66099493, 66139144, 66169424, 66239073, 66339605, 66559492, 66588775, 66608749, 66608848, 66669634, 66689441, 66749749, 66759076, 66778442, 66788557, 66898775, 66938730, 66999274, 67029383, 67048865, 67108446, 67119435, 67149807, 67288414, 67299663, 67428261, 67428629, 67469196, 67539554, 67559668, 67659283, 67709469, 67709933, 67729474, 67869484, 67908879, 67998894, 68079080, 68098630, 68119786, 68149110, 68149653, 68168999, 68169378, 68229225, 68369334, 68399164, 68469225, 68569659, 68778808, 68778983, 69008362, 69038932, 69049495, 69198674, 69279236, 69279465, 69309544, 69428986, 69429181, 69558645, 69558942, 69709542, 70068829, 70069697, 70129124, 70248979, 70258862, 70288883, 70309656, 70328770, 70339417, 70359200, 70439551, 70559358, 70578779, 70579332, 70688584, 70778469, 70799594, 70888489, 70999062, 71139702, 71148957, 71149169, 71169105, 71179258, 71198532, 71389046, 71518972, 71639394, 71658975, 71688811, 71749802, 71868787, 71878946, 71888464, 71909497, 71969330, 72029088, 72038660, 72049192, 72078864, 72129368, 72289864, 72379350, 72568488, 72568921, 72649361, 72679269, 72729216, 72828834, 72929722, 73138628, 73168892, 73169561, 73188623, 73209199, 73259064, 73438506, 73559331, 73588485, 73588621, 73699440, 73748889, 73818858, 73879248, 73928823, 73969093, 73969376, 74069044, 74079210, 74109818, 74128994, 74129106, 74179163, 74219463, 74219739, 74259155, 74309447, 74318968, 74319071, 74368338, 74599671, 74609646, 74659344, 74699180, 74718768, 74888485, 74898767, 75018485, 75048628, 75119274, 75148557, 75168678, 75169873, 75219486, 75219776, 75268736, 75299594, 75358918, 75408682, 75479224, 75569598, 75598710, 75619415, 75699301, 75788654, 75848358, 75928838, 75938950, 76018415, 76019177, 76039304, 76048962, 76129104, 76149348, 76268865, 76289204, 76399231, 76598597, 76669143, 76778968, 76898635, 76899205, 76989012, 76999585, 77009573, 77029045, 77108986, 77149569, 77198604, 77279174, 77318583, 77408727, 77429067, 77599449, 77878377, 77908616, 77919551, 78048892, 78129317, 78159109, 78219407, 78269754, 78338962, 78349050, 78418862, 78568536, 78668519, 78668946, 78728305, 78889716, 78959693, 78979066, 79019020, 79029159, 79098704, 79159573, 79209148, 79258818, 79358747, 79359621, 79369705, 79398507, 79568955, 79618506, 79649197, 79829667, 79849108, 79889586, 79928612, 79938291, 80029476, 80038720

]

dirs = 0
pngs = 0

for file in allFileList:
    if int(file) in target:
        norm = "C://Users/User/OneDrive - 國立中正大學/醫學影像專題/專題三/ADC_PNG_val_bias/" + file
        image = norm
        temp_image = image + "/"
        dirs = dirs + 1
        
        for i in os.listdir(image):
            if i.endswith('.png'):
                tiff_path = temp_image + i
                png_path = os.path.join(pngimage_dir, str(pngs) + '.png')

                # Open the TIFF image and convert it to PNG
                image = Image.open(tiff_path)
                image.save(png_path, 'PNG')
                pngs = pngs + 1

print( dirs, pngs )

#train 41795
#ADC/0 1068 22591
#ADC/1 909 19204
#DWI/0 1068 22591
#DWI/1 909 19204

#val 14002
#ADC/0 358 7640
#ADC/1 302 6362


